# =============================================================================
# WEALTH COACH AI ASSISTANT - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and configure with your actual values
# NEVER commit .env to version control

# -----------------------------------------------------------------------------
# APPLICATION SETTINGS
# -----------------------------------------------------------------------------
APP_NAME="Wealth Coach AI"
APP_VERSION="1.0.0"
ENVIRONMENT="development"  # development, staging, production
DEBUG=true
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# Server Configuration
HOST="0.0.0.0"
PORT=8000
WORKERS=4  # Number of Gunicorn workers in production

# -----------------------------------------------------------------------------
# LLM CONFIGURATION
# -----------------------------------------------------------------------------
# OpenAI (Primary) - Leave empty to use local fallback only
OPENAI_API_KEY=""
OPENAI_MODEL="gpt-3.5-turbo"
OPENAI_MAX_TOKENS=500
OPENAI_TEMPERATURE=0.7
OPENAI_TIMEOUT=30

# Fallback Models (Optional)
ENABLE_LOCAL_FALLBACK=true
LOCAL_MODEL_PATH="./models/llama-2-7b-chat"

# Cohere (Optional Alternative)
COHERE_API_KEY=""
COHERE_MODEL="command-light"

# LLM Cost Controls
MAX_TOKENS_PER_REQUEST=500
MAX_REQUESTS_PER_USER_PER_DAY=100
ENABLE_STREAMING=true

# -----------------------------------------------------------------------------
# VECTOR DATABASE (ChromaDB)
# -----------------------------------------------------------------------------
CHROMA_PERSIST_DIR="./data/vector_store"
CHROMA_HOST="localhost"
CHROMA_PORT=8001
CHROMA_COLLECTION_NAME="wealth_coach_knowledge"

# Embedding Model (HuggingFace)
EMBEDDING_MODEL="sentence-transformers/all-MiniLM-L6-v2"
EMBEDDING_DIMENSION=384
EMBEDDING_BATCH_SIZE=32

# RAG Configuration
RAG_TOP_K=5  # Number of documents to retrieve
RAG_SIMILARITY_THRESHOLD=0.7
RAG_MAX_CONTEXT_LENGTH=2000

# -----------------------------------------------------------------------------
# CACHING (Redis)
# -----------------------------------------------------------------------------
REDIS_URL="redis://localhost:6379/0"
REDIS_PASSWORD=""
REDIS_MAX_CONNECTIONS=50

# Cache Strategy
CACHE_ENABLED=true
CACHE_TTL=3600  # Default TTL in seconds (1 hour)
QUERY_CACHE_TTL=7200  # Cache LLM responses for 2 hours
EMBEDDING_CACHE_TTL=86400  # Cache embeddings for 24 hours
CACHE_HIT_RATE_TARGET=0.9

# -----------------------------------------------------------------------------
# DATABASE (Optional - for user data, conversation history)
# -----------------------------------------------------------------------------
# SQLite (Development)
DATABASE_URL="sqlite:///./data/wealth_coach.db"

# PostgreSQL (Production - Optional)
# DATABASE_URL="postgresql+asyncpg://user:password@localhost:5432/wealth_coach"
# DB_POOL_SIZE=20
# DB_MAX_OVERFLOW=10

# -----------------------------------------------------------------------------
# AUTHENTICATION & SECURITY
# -----------------------------------------------------------------------------
# JWT Settings
JWT_SECRET_KEY="CHANGE-THIS-TO-A-SECURE-RANDOM-STRING-IN-PRODUCTION"
JWT_ALGORITHM="HS256"
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Hashing
PASSWORD_MIN_LENGTH=8
BCRYPT_ROUNDS=12

# CORS Settings
CORS_ORIGINS='["http://localhost:3000","http://localhost:19006"]'  # React Native dev
CORS_ALLOW_CREDENTIALS=true

# API Keys (for mobile app)
API_KEY_HEADER="X-API-Key"
VALID_API_KEYS='["dev-key-12345"]'  # Comma-separated list

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=20
RATE_LIMIT_PER_HOUR=200
RATE_LIMIT_PER_DAY=1000

# Per-Endpoint Limits
CHAT_RATE_LIMIT_PER_MINUTE=10
SEARCH_RATE_LIMIT_PER_MINUTE=30

# -----------------------------------------------------------------------------
# WEBSOCKET CONFIGURATION
# -----------------------------------------------------------------------------
WS_ENABLED=true
WS_HEARTBEAT_INTERVAL=30
WS_MAX_CONNECTIONS_PER_USER=3
WS_MESSAGE_MAX_SIZE=65536  # 64KB

# -----------------------------------------------------------------------------
# MONITORING & LOGGING
# -----------------------------------------------------------------------------
# Prometheus Metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# Sentry Error Tracking (Optional)
SENTRY_DSN=""
SENTRY_TRACES_SAMPLE_RATE=0.1

# Logging
LOG_FORMAT="json"  # json or text
LOG_FILE="./logs/wealth_coach.log"
LOG_ROTATION="10 MB"
LOG_RETENTION="30 days"

# -----------------------------------------------------------------------------
# FINANCIAL DATA SOURCES (Optional Integrations)
# -----------------------------------------------------------------------------
# Alpha Vantage (Free stock data)
ALPHA_VANTAGE_API_KEY=""

# IEX Cloud (Financial data)
IEX_CLOUD_API_KEY=""

# Yahoo Finance (Free, no key needed)
ENABLE_YAHOO_FINANCE=true

# -----------------------------------------------------------------------------
# CONTENT & KNOWLEDGE BASE
# -----------------------------------------------------------------------------
KNOWLEDGE_BASE_PATH="./data/knowledge_base"
AUTO_RELOAD_KNOWLEDGE=false
SUPPORTED_FILE_TYPES='["pdf","md","txt","docx"]'

# Document Processing
MAX_DOCUMENT_SIZE_MB=10
CHUNK_SIZE=500  # Characters per chunk
CHUNK_OVERLAP=50

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
ENABLE_USER_REGISTRATION=true
ENABLE_CONVERSATION_HISTORY=true
ENABLE_PERSONALIZATION=true
ENABLE_ANALYTICS=true

# -----------------------------------------------------------------------------
# DEPLOYMENT & INFRASTRUCTURE
# -----------------------------------------------------------------------------
# Nginx Reverse Proxy
NGINX_HOST="wealthcoach.yourdomain.com"
NGINX_SSL_CERT_PATH="/etc/letsencrypt/live/yourdomain.com/fullchain.pem"
NGINX_SSL_KEY_PATH="/etc/letsencrypt/live/yourdomain.com/privkey.pem"

# Docker Configuration
DOCKER_NETWORK="wealth_coach_network"
RESTART_POLICY="unless-stopped"

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=""  # Optional S3 backup

# -----------------------------------------------------------------------------
# DEVELOPMENT & TESTING
# -----------------------------------------------------------------------------
TEST_MODE=false
MOCK_LLM_RESPONSES=false
SEED_DATABASE=false

# API Documentation
ENABLE_SWAGGER_UI=true
ENABLE_REDOC=true

# -----------------------------------------------------------------------------
# COMPLIANCE & PRIVACY
# -----------------------------------------------------------------------------
# Data Retention
CONVERSATION_RETENTION_DAYS=90
USER_DATA_RETENTION_DAYS=365

# Privacy Settings
ANONYMIZE_LOGS=true
STORE_IP_ADDRESSES=false
ENABLE_GDPR_COMPLIANCE=true

# Disclaimers
FINANCIAL_DISCLAIMER="This AI assistant provides educational information only and is not a substitute for professional financial advice."
